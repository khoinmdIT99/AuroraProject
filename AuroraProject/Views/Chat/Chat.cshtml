
@{
    ViewBag.Title = "Chat";
}


    <div class="container-fluid register">
                <sidebar>
                    <div id="search-container">
                        <input type="text" placeholder="Search" />
                    </div>

                    <!-- <input type="text" placeholder="Search"/> -->
                    <div class="list-wrap">
                        <div class="list">
                            <img src="morganfreeman.jpg" alt="Morgan Freeman" />
                            <div class="info">
                                <span class="user">Morgan Freeman</span>
                                <span class="text">Aurora</span>
                            </div>
                            <!-- <span class="count">20</span> -->
                            <span class="time">20 min.ago</span>
                        </div>
                        <div class="list">
                            <img src="jenniferaniston.jpg" alt="Jennifer Aniston" />
                            <div class="info">
                                <span class="user">Jennifer Aniston</span>
                                <span class="text">I love Aurora!</span>
                            </div>
                            <span class="time">5 min. ago</span>
                        </div>
                        <div class="list">
                            <img src="samheughan.jpg" alt="Sam Heughan" />
                            <div class="info">
                                <span class="user">Sam Heughan</span>
                                <span class="text">Aurora for life!</span>
                            </div>
                            <span class="time">1 hour ago</span>
                        </div>
                        <div class="list">
                            <img src="jessicaalba.jpg" alt="Jessica Alba" />
                            <div class="info">
                                <span class="user">Jessica Alba</span>
                                <span class="text">Lets go Aurora!</span>
                            </div>
                            <span class="time">1 day ago</span>
                        </div>
                        <div class="list">
                            <img src="michaelkeaton.jpg" alt="Michael Keaton" />
                            <div class="info">
                                <span class="user">Michael Keaton</span>
                                <span class="text">Hello Aurora!</span>
                            </div>
                            <span class="time">now</span>
                        </div>
                        <div class="list">
                            <img src="blakelively.jpg" alt="Blake Lively" />
                            <div class="info">
                                <span class="user">Blake Lively</span>
                                <span class="text">I love Aurora too!</span>
                            </div>
                            <span class="time">5 min. ago</span>
                        </div>
                        <div class="list">
                            <img src="willsmith.jpg" alt="Will Smith" />
                            <div class="info">
                                <span class="user">Will Smith</span>
                                <span class="text">Count me in!</span>
                            </div>
                            <span class="time">1 hour ago</span>
                        </div>
                        <div class="list">
                            <img src="juliaroberts.jpg" alt="Julia Roberts" />
                            <div class="info">
                                <span class="user">Julia Roberts</span>
                                <span class="text">I support Aurora!</span>
                            </div>
                            <span class="time">1 day ago</span>
                        </div>
                        <div class="list">
                            <img src="harissonford.jpg" alt="Harisson Ford" />
                            <div class="info">
                                <span class="user">Harisson Ford</span>
                                <span class="text">Hello there!</span>
                            </div>
                            <span class="time">now</span>
                        </div>
                        <div class="list">
                            <img src="katieholmes.jpg" alt="Katie Holmes" />
                            <div class="info">
                                <span class="user">Katie Holmes</span>
                                <span class="text">I love you guys!</span>
                            </div>
                            <span class="time">5 min. ago</span>
                        </div>
                        <div class="list">
                            <img src="leonardodicaprio.jpg" alt="Leonardo Di Caprio" />
                            <div class="info">
                                <span class="user">Leonardo Di Caprio</span>
                                <span class="text">Ciao Bella!</span>
                            </div>
                            <span class="time">1 hour ago</span>
                        </div>
                        <div class="list">
                            <img src="samueljackson.jpg" alt="Samuel L Jackson" />
                            <div class="info">
                                <span class="user">Samuel L Jackson</span>
                                <span class="text">Ok, lets go.</span>
                            </div>
                            <span class="time">1 day ago</span>
                        </div>
                        <div class="list">
                            <img src="galgadot.jpg" alt="Gal Gadot" />
                            <div class="info">
                                <span class="user">Gal Gadot</span>
                                <span class="text"> Hello! </span>
                            </div>
                            <span class="time">now</span>
                        </div>
                        <div class="list">
                            <img src="brattpitt.jpg" alt="Bratt Pitt" />
                            <div class="info">
                                <span class="user">Bratt Pitt</span>
                                <span class="text">Good night</span>
                            </div>
                            <span class="time">5 min. ago</span>
                        </div>
                        <div class="list">
                            <img src="gwynethpaltrow.jpg" alt="Gwyneth Paltrow" />
                            <div class="info">
                                <span class="user">Gwyneth Paltrow</span>
                                <span class="text">Aurora for the win!</span>
                            </div>
                            <span class="time">1 hour ago</span>
                        </div>
                    </div>
                </sidebar>
                <div class="content">
                    <header>
                        <img src="johnsmith.jpg" alt="John Smith">
                        <div class="info">
                            <span class="user">John Smith</span>
                            <span class="time">1 hour ago</span>
                        </div>
                        <div class="open">
                            <a href="javascript:;">UP</a>
                        </div>
                    </header>
                    <div class="message-wrap">
                        <div class="message-list">
                            <div class="msg">
                                <p>
                                    We absolutely adore your website and we want to be part of it!
                                </p>
                            </div>
                            <div class="time">now</div>
                        </div>
                        <div class="message-list me">
                            <div class="msg">
                                <p>
                                    That would be awesome!
                                </p>
                            </div>
                            <div class="time">now</div>
                        </div>
                        <div class="message-list">
                            <div class="msg">
                                <p>
                                    It would be a great honor to be part of your creation!
                                </p>
                            </div>
                            <div class="time">now</div>
                        </div>
                        <div class="message-list me">
                            <div class="msg">
                                <p>
                                    Glad to hear it!
                                </p>
                            </div>
                            <div class="time">now</div>
                        </div>
                        <div class="message-list">
                            <div class="msg">
                                <p>
                                    Could we arrange a meeting?
                                </p>
                            </div>
                            <div class="time">now</div>
                        </div>
                        <div class="message-list me">
                            <div class="msg">
                                <p>
                                    Definitely! Let's make it happen! We are fully booked though, until next month. We are so sorry for the inconvinience, we will try our best to meet up as soon as possible! Right now we have so many things going on that it is really not up to us.
                                    We hope that you guys can understand and be patient! Good things are on their way!
                                </p>
                            </div>
                            <div class="time">now</div>
                        </div>
                        <div class="message-list">
                            <div class="msg">
                                <p>
                                    No problem at all. We understand, and we will wait as long as it takes! Do your thing guys and give us a heads up when you're back in town so we can meet up!
                                </p>
                            </div>
                            <div class="time">now</div>
                        </div>
                        <div class="message-list me">
                            <div class="msg">
                                <p>
                                    Yes, we will definitely call you up once we will be back!
                                </p>
                            </div>
                            <div class="time">now</div>
                        </div>
                        <div class="message-list">
                            <div class="msg">
                                <p>
                                    It's been a pleasure! Can't wait to do business with your company! See you soon!
                                </p>
                            </div>
                            <div class="time">now</div>
                        </div>
                        <div class="message-list me">
                            <div class="msg">
                                <p>
                                    Same here! We will talk soon! Peace!
                                </p>
                            </div>
                            <div class="time">now</div>
                        </div>
                    </div>
                    <div class="message-footer">
                        <input type="text" data-placeholder="type a message" />
                    </div>
                </div>
    </div>




@section scripts {
    <script>

        const ls = localStorage.getItem("selected");
        let selected = false;
        var list = document.querySelectorAll(".list"),
            content = document.querySelector(".content"),
            input = document.querySelector(".message-footer input"),
            open = document.querySelector(".open a");

        //init
        function init() {
            //input.focus();
            let now = 2;
            const texts = ["Hello Aurora!", "I love Aurora too!",
                "Count me in!", "I support Aurora!", "Hello there!",
                "I love you guys!", "Ciao Bella!", "Go go go Aurora!", "Ok, let's go!"];
            for (var i = 4; i < list.length; i++) {
                list[i].querySelector(".time").innerText = `${now} day ago`;
                list[i].querySelector(".text").innerText = texts[(i - 4) < texts.length ? (i - 4) : Math.floor(Math.random() * texts.length)];
                now++;
            }
        }
        init();

        //process
        function process() {
            if (ls != null) {
                selected = true;
                click(list[ls], ls);
            }
            if (!selected) {
                click(list[0], 0);
            }

            list.forEach((l, i) => {
                l.addEventListener("click", function () {
                    click(l, i);
                });
            });

            try {
                document.querySelector(".list.active").scrollIntoView(true);
            }
            catch { }

        }
        process();

        //list click
        function click(l, index) {
            list.forEach(x => { x.classList.remove("active"); });
            if (l) {
                l.classList.add("active");
                document.querySelector("sidebar").classList.remove("opened");
                open.innerText = "UP";
                const img = l.querySelector("img").src,
                    user = l.querySelector(".user").innerText,
                    time = l.querySelector(".time").innerText;

                content.querySelector("img").src = img;
                content.querySelector(".info .user").innerHTML = user;
                content.querySelector(".info .time").innerHTML = time;

                const inputPH = input.getAttribute("data-placeholder");
                input.placeholder = inputPH.replace("{0}", user.split(' ')[0]);

                document.querySelector(".message-wrap").scrollTop = document.querySelector(".message-wrap").scrollHeight;

                localStorage.setItem("selected", index);
            }
        }

        open.addEventListener("click", (e) => {
            const sidebar = document.querySelector("sidebar");
            sidebar.classList.toggle("opened");
            if (sidebar.classList.value == 'opened')
                e.target.innerText = "DOWN";
            else
                e.target.innerText = "UP";
        });




    </script>
}

